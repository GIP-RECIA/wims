!set methtit=Sustitución en una expresión
!set methtit2=Sustitución en una expresión global
!set methenv=ZZ QQ RR CC
!set methparmtype=parm algexp nocomma nopart, parm equation >, choice 2
!set methhelp=Sustitución en una expresión según una ecuación existente.

!if $wims_read_parm iswordof form check
  !goto $wims_read_parm
!endif

!exit
:form
Appliquer la
!formselect methparm3 list 1,2 prompt sustitución, sustitución inversa
!read deduc/methparm.phtml 2
$ en la expresión
!read deduc/methparm.phtml 1
!exit
:check
!distribute items $methparmobj2 into hd,left,eq,right
eqt==
!if $eq!=$eqt
  error=Mala justificación de la sustitución.
  !exit
!endif
!if $methparm3=2
  !exchange left,right
!endif
lvar=!varlist $left
!if $lvar=$left
  subst=subst
!else
  subst=ratsubst
!endif
!distribute items $methparmobj1 into hd2,exp2
!read deduc/sub/simplify $subst($right,$left,$exp2)
!if $out=$empty
  error=Fail
  !exit
!endif

newobject1=$out
oldobject=1
methexp=Sustitución \($left = $right).
!exit


!if $sstyle=1
  !if $substep=0
    !if $all_steps=0
      !form reply
      Qual è il <em>primo</em> passaggio errato in questa argomentazione?
      !formselect badstep from 0 to $stepcnt
      (La risposta 0 significa che tutto è corretto.)
      <div class="wimscenter">
      <input type="submit" value="Invia la risposta"></div>
    !else
      Selezionare <em>tutti</em> i passaggi NON corretti e
      <input type="submit" value="cliccare qui">.
    !endif
    !formend
  !else
    !if $all_steps=0
      !if $badstep=0
        Effettivamente tutti i passaggi sono corretti.
      !else
        Effettivamente il primo passaggio errato è il numero $badstep.
      !endif
    !endif
    Punteggio ottenuto: $module_score/10.
    !if $expstep!=$empty
      <p>Alcune spiegazioni.
      </p><ul>
      !for i in $expstep
        <li> Il passaggio $i
        !if $i isitemof $badstep
          è corretto.
          !line $i of $remarks
        !else
          !set j=!positionof item $i in $bad_steps
          !set e=!item $j of $bad_reasons
          non è corretto.
          !read reasons/$e.det
        !endif
        </li>
      !next i
      </ul>
    !endif
  !endif
!else
  !if $substep=0
    !form reply
    Cosa ne pensi di quest'<em>ultimo</em> passaggio?
    !formselect ans list --,OK,$bad_reasons prompt Non lo so,\
      Sì: il passaggio è corretto,$bad_rnames
    <input type="submit" value="Invia">
    !formend
  !endif

  !if $substep=2
    Hai ragione:
    !if $step_reason=OK
      quest'ultimo passaggio è corretto.
    !else
      quest'ultimo passaggio non è corretto.
      Il passaggio corretto è
      <div class="wimscenter">
      !line $step of $good
      </div>
    !endif
    <p>
    !if $step<$stepcnt
      !href cmd=reply&ans=next Passaggio successivo.
    !else
      L'esercizio è terminato. Punteggio ottenuto: $module_score/10.
    !endif
    </p>
  !endif
!endif

type=question
textarea="data instruction instruction1 instruction2 instruction3 feedback1 feedback2 feedback3"
iEdit="instruction instruction1 instruction2 instruction3 feedback1 feedback2 feedback3"

:Es fan dues o tres preguntes successives sobre un objecte escollit a l'atzar d'una llista.
Podeu triar el tipus de preguntes
(numèrica, text, d'opció múltiple). En el cas d'una pregunta d'opció múltiple,
hem d'omplir la llista d'opcions.

<p>
Les dades per a cada objecte (un objecte per línia) estan separades per comes
i formatats de la manera següent:
</p>
<pre>
objecte, resposta a la pregunta 1, resposta a la pregunta 2, resposta a la pregunta 3
</pre>
<p>
L'objecte pot ser una imatge (posar el codi html:: <span class="tt wims_address">&lt;img src="\imagedir/nom.png" alt=""></span>).
En el cas d'una opció múltiple, la resposta és el número de l'opció correcta.
</p>
<p>
Per als feedback, l'objecte pot ser cridat per la variable <span class="tt wims_code_variable">\name</span>.
</p>
:%%%%%%%% Paramètres d'exemples à redéfinir %%%%%%%%%%%%%%%%%

:\title{Preguntes successives sobre un objecte}
:\author{Bernadette, Perrin-Riou}
:\email{bernadette.perrin-riou@math.u-psud.fr}
:\credits{}

:Format 1
\text{format1=item(1, radio (una opció de la següent llista),
    numeric (pregunta numèrica),
    case (sense tolerància d'error),
	  nocase (tolera majúscules/minúscules),
	  atext (ignora plural/singular i articles)
	)}
:Llista d'opcions per a la pregunta 1 (si radio)
Doneu la llista d'opcions si seleccioneu el tipus radio.
\text{choix1=premier groupe, deuxième groupe, troisième groupe}

:Format 2
\text{format2=item(3,radio (una opció de la següent llista),
    numeric (pregunta numèrica),
    case (sense tolerància d'error),
	  nocase (tolera majúscules/minúscules),
	  atext (ignora plural/singular i articles)
	)}
:Llista d'opcions per a la pregunta 2 (si radio)
Doneu la llista d'opcions si seleccioneu el tipus radio.
\text{choix2=}
:Format 3
\text{format3=item(4,0 (cap pregunta),
    radio (una opció de la següent llista),
    numeric (pregunta numèrica),
    case (sense tolerància d'error),
	  nocase (tolera majúscules/minúscules),
	  atext (ignora plural/singular i articles)
	)}
:Llista d'opcions per a la pregunta 3 (si radio)
Doneu la llista d'opcions si seleccioneu el tipus radio.
\text{choix3=}
:Text d'aprovació
\text{right=Tens raó.}
:Text de desaprovació
\text{false=La vostra resposta no és correcta.}

:Dades principals
\text{data= manger,1,Je mangeais, Je mangerai
finir, 2, Je finissais, Je finirai
courir,3, Je courais, Je courrai}


:%%%%%%%%%%%%%%
\text{data=randomrow(\data)}
\text{name=<span class="name">\data[1]</span>}
\text{data=\data[2..-1]}

:Enunciat general
\text{instruction=Nous allons étudier le verbe \name.}
:Enunciat per a la primera etapa
\text{instruction1=Donner le groupe de \name.}

:Enunciat per a la segona etapa
\text{instruction2=Donner l'imparfait du verbe \name à la première personne du singulier sans oublier le pronom.}

:Enunciat per a la tercera etapa
\text{instruction3=Donner le futur du verbe \name à la première personne du singulier sans oublier le pronom.}

:%%%%%%%%%%%%%% Rien à modifier avant l'énoncé %%%%%%%%%%%%%%%%
\css{<style>
  .name {color:#047;}
  .big_bullet>li{font-size:2em;color:#599;margin:0 0 .5em .5em;}
  .big_bullet div, .big_bullet label{font-size:1rem;margin:.2em;}
  .big_bullet .instruction,.big_bullet .reponse{color:initial;}
</style>}

\text{format1=wims(word 1 of \format1)}
\text{format2=wims(word 1 of \format2)}
\text{format3=wims(word 1 of \format3)}
\text{rep1=\data[1]}
\text{rep2=\data[2]}
\text{rep3=\data[3]}

\text{reponse1=\data[1]}
\text{reponse2=\data[2]}
\text{reponse3=\data[3]}
\if{\format1 issametext radio}{
  \text{rep1=\data[1];\choix1}
  \text{reponse1=\choix1[\data[1]]}
}
\if{\format2 issametext radio}{
  \text{rep2=\data[2];\choix2}
  \text{reponse2=\choix2[\data[2]]}
}
\if{\format3 issametext radio}{
  \text{rep3=\data[3];\choix3}
  \text{reponse3=\choix3[\data[3]]}
}
\text{STEP=r1}
\if{\format2!=0}{
  \text{STEP=\STEP
  r2}
  \if{\format3!=0}{
  \text{STEP=\STEP
  r3}
  }
}

\text{reponse1=<span class="oef_indgood">\reponse1</span>}
\text{reponse2=<span class="oef_indgood">\reponse2</span>}
\text{reponse3=<span class="oef_indgood">\reponse3</span>}
:Feedback a la segona etapa

\text{feedback1=\name est un verbe du \reponse1.}

:Feedback a la tercera etapa

\text{feedback2=L'imparfait à la première personne du singulier de \name est \reponse2.}

:Feedback al final

\text{feedback3=Le futur à la première personne du singulier \name est \reponse3.}


:%%%
\nextstep{\STEP}

\statement{
<div>\instruction</div>
<ol class="big_bullet"><li>
  <div class="instruction">\instruction1</div>
  \if{\step=1 or \step>=4}{
    \if{\format1 notsametext radio}{
      <label class="reponse" for="reply1">\name_my_answer \embed{r1}</label>
    }{
      <div class="reponse">\name_my_answer \embed{r1}</div>
    }
  }{
    <div class="reponse">
      \name_my_answer <span class="name">\reply1</span>
    </div>
  }

  \if{\step>=2}{
    <div class="feedback
      \if{\sc_reply1=1}{oef_indgood">\right}{\if{\sc_reply1<=0}{oef_indbad}{oef_indpartial}">\false} \feedback1
    </div>
    </li><li>
    <div class="instruction">
      \instruction2
    </div>
  }

  \if{\step=2 or \step>=4}{
    \if{\format2 notsametext radio}{
      <label class="reponse" for="reply2">\name_my_answer \embed{r2}</label>
    }{
      <div class="reponse">\name_my_answer \embed{r2}</div>
    }
  }

  \if{\step>=3}{
    \if{\step < 4}{
      <div class="reponse">
        \name_my_answer <span class="name">\reply2</span>
      </div>
    }
    <div class="feedback
      \if{\sc_reply2=1}{oef_indgood">\right}{\if{\sc_reply2<=0}{oef_indbad}{oef_indpartial}">\false} \feedback2
    </div>
    \if{\format3!=0}{
      </li><li>
      <div class="instruction"> \instruction3</div>
      \if{\format3 notsametext radio}{
        <label class="reponse" for="reply3">\name_my_answer \embed{r3}</label>
      }{
        <div class="reponse">\name_my_answer \embed{r3}</div>
      }
    }
  }
  \if{\step>=4 and \format3!=0}{
    <div class="feedback
      \if{\sc_reply3=1}{oef_indgood">\right}{\if{\sc_reply3<=0}{oef_indbad}{oef_indpartial}">\false} \feedback3
    </div>
  }
  </li>
</ol>
}

\answer{}{\rep1}{type=\format1}{option=nonstop}
\answer{}{\rep2}{type=\format2}{option=nonstop}
\answer{}{\rep3}{type=\format3}{option=nonstop}
